# 模拟地铁地面两层交通网络

## 连接地面道路和地铁两层交通网络

    a. 导入【多层交通网络建模.mxd】

    b. 编辑器→开始编辑→【创建要素】面板→选择出入通道模板

        ⅰ. 连接【地铁出入口】和地铁站台

        ⅱ. 设置属性：通行时间和线路类型

        ⅲ. 在出入口处打断地面道路，在站台打断地铁

## 拓扑检查

    a. 右键【目录/交通网络.gdb/交通网络/交通网络_Topology】→属性→要素类

    b. 添加类→添加【地铁】【地铁出入口】

    c. 规则→添加规则：【地铁：不能自相交】【地铁出入口：必须被其他要素端点覆盖：地面道路】【地铁出入口：必须被其他要素端点覆
    
    d. 右键【交通网络】→刷新

    e. 右键【目录/交通网络.gdb/交通网络/交通网络_Topology】→验证→修改拓扑错误

## 计算交通路网的成本属性值

    a. 打开【地铁】属性表→重新计算轨道线通行时间→[Shape_Length] / 1000 / 35 * 60

    b. 打开【地面道路】属性表→重新计算车行时间步行时间

        ⅰ. 车：[Shape_Length] / 1000 / （公70、主50、次40、支20） * 60 

        ⅱ. 步：[Shape_Length] / 1.25 / 60

## 构建多层网络

    a. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→属性→源

    b. 添加→添加【地铁】【地铁出入口】

    c. 【连通性】→组列：2→地铁1，地面道路2，出入口1和2

    d. 将地铁出入口连通性策略改为：交点处连通

    e. 【属性】→打开车行时间赋值器→【地铁】类型：常量，值：-1

    f. 打开路程赋值器→【地铁】【地面道路】类型：字段，值：Shape_Length

    g. 添加新属性：名称：人行时间，类型：成本，单位：分钟，勾选默认使用

    h. 打开人行时间赋值器→【地铁】类型：字段，值：通行时间，【地面道路】类型：字段，值：步行时间

    i. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→构建
    