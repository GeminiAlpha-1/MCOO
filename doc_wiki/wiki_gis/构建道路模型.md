# 构建道路模型

## 准备地面路网并进行拓扑检查

### 打开【交通网络建模.mxd】

### 右键【目录/交通网络.gdb/交通网络】→新建→拓扑

    a. 选择参与要素类：地面道路

    b. 添加规则：不能相交或内部接触、不能自相交、不能有悬挂点

### 拖入【交通网络_Topology】图层

### 编辑器→开始编辑

### 打开【高级编辑】工具条→使用【打断相交线】打断相交道路，使用【延伸工具】延长线条

### 停止编辑→验证

### 重新计算车行时间和步行时间

    a. 车：[Shape_Length] / 1000 / （公70、主50、次40、支20） * 60 

    b. 步：[Shape_Length] / 1.25 / 60

## 地面路网的简单建模

### 右键【目录/交通网络.gdb/交通网络】→新建→网络数据集

    a. 选择参与要素类：地面道路

    b. 点击【连通性】→连通性策略：端点

    c. 如何对高程建模：无

    d. 添加【车行时间】属性，单位分钟，打开赋值器，将值改为车行时间

    e. 添加【路程】属性，单位米，打开赋值器，类型：字段，值：Shape_Length

    f. 右键【路程】→在默认情况下使用

    g. 为网络建立行驶方向：否



## 模拟交通管制、红绿灯等候

### 模拟单行线

    a. 右键【目录/交通网络.gdb/交通网络/地面道路】→属性→字段

        ⅰ. 添加字段：单行线，类型：短整型，默认值：0

    b. 右键【地面道路】图层→属性：右箭头符号化

    c. 使用【选择要素】选择道路→打开【地面道路】属性表→单行线 = 1

    d. 选择另一些道路→打开【地面道路】属性表→单行线 = -1

    e. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→属性→属性

    f. 添加【道路限行】属性，使用类型：限制，勾选默认使用

        ⅰ. 打开【道路限行】赋值器，将地面道路的类型改为字段

        ⅱ. 右键【自-至】→值→属性，输入：restricted = false 【换行】if [单行线] = -1 Then restricted = true 【值=】输入restricted

        ⅲ. 右键【自-至】→值→属性，同上，把-1改为1

    g. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→构建

### 模拟禁止转弯

    a. 右键【目录/交通网络.gdb/交通网络】→新建：要素类

        ⅰ. 名称：路口转弯，类型：转弯要素

    b. 开始编辑，打开【创建要素】面板，并打开【捕捉】工具条，打开所有捕捉，并在下拉中打开【使用捕捉】和【交点捕捉】

    c. 在【创建要素】面板中点击【路口转弯】

        ⅰ. 绘制禁止左转：单击小路、交叉点，双击主干道

        ⅱ. 绘制禁止掉头：单击主干道、交叉点、回头双击主干道

    d. 编辑器：停止编辑

    e. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→属性→转弯，没有路口转弯倒回去重做

    f. 切换【属性】选项卡→添加→名称：转弯限制，使用类型：限制，勾选默认使用

    g. 打开【转弯限制】赋值器→路口转弯类型：常量，值：使用约束条件

    h. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→构建

### 模拟红绿灯等候

    a. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→属性→属性

    b. 打开【车行时间】赋值器→切换【默认值】选项卡

        ⅰ. 将【转弯】类型改为【通用转弯延迟】

        ⅱ. 双击【转弯】的值一行，

        ⅲ. 秒从上到下依次设置为：0，20，30，10，30

    c. 右键【目录/交通网络.gdb/交通网络/交通网络_ND】→构建
    